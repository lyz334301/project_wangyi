<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<link rel="stylesheet" href="src/scss/register.css">
	<title>网易帐号中心</title>
</head>

<body>
	<div class="g-hd">
		<div class="g-in">
			<div class="spritebg" style="background:url(img/sprite.png) no-repeat"></div>
			<div class="m-tr-block">已有帐号？去<a id="btn_Login" href="login.html">登录</a></div>
		</div>
	</div>

	<div class="g-bd">
		<div class="g-head">
			<div class="left select">普通帐号注册</div>
			<div class="right select">靓号注册</div>

		</div>
		
			<p>账号 : <input type="text" placeholder="网易优选/其他邮箱" id="email"></p>
			<p>密码 : <input type="password" placeholder="6-16位密码，区分大小写" id="psd"></p>
			<p style="margin-left:-36px">确认密码 : <input type="password" placeholder="再次输入密码" id="psd1"></p>
			<p style="margin-left:-28px">手机号 : <input type="text" placeholder="11位手机号" id="iphone"></p>
			<label for="" style="margin-left: -224px; color:#4cb5ff;">切换到国际手机</label><br>
			<label for="" style="margin-left: -104px;">忘记密码时，可通过手机快速找回密码</label>
			<p><button id="btn">注&nbsp;册</button></p>
		
		<span class="tip">
			<span class="m-agree m-agree-ok"><input type="checkbox" class="u-agree"></span><span style="margin-left: 10px;">用户勾选即代表同意</span><a
			 href="">《网易邮箱服务条款》</a>和<a href="">《网易隐私政策》</a>
		</span>
		<img src="https://ursdoccdn.nosdn.127.net/reg/app_xc_small_170402.png" alt="">
		<div id="em1"></div>
		<div id="em2"></div>
		<div id="em3"></div>
		<div id="em4"></div>
	</div>

	</div>
</body>

</html>
<script src="js/jquery-1.11.1.js"></script>
 
<script>
	var em1 = $("#em1")
	var email = $("#email")
	var reg = new RegExp("^[a-z0-9A-Z]+[- | a-z0-9A-Z . _]+@([a-z0-9A-Z]+(-[a-z0-9A-Z]+)?\\.)+[a-z]{2,}$");
	email.blur(function () {
		var sz = email.val();
		if (reg.test(sz)) {
			// alert("成功")
			em1.css("display", "block");
		} else {
			// alert("成功")
			em1.css("display", "none");
			email.css("border", " 1px solid red")
		}
	})

	var em2 = $("#em2")
	var psd = $("#psd")
	var regx = /^(?!([a-zA-Z]+|\d+)$)[a-zA-Z\d]{6,18}$/;
	psd.blur(function () {
		var reg = psd.val();
		if (regx.test(reg)) {
			// alert("成功")
			em2.css("display", "block");
		} else {
			// alert("成功")
			em2.css("display", "none");
			psd.css("border", " 1px solid red")
		}
	})

	var em3 = $("#em3")
	var psd1 = $("#psd1")
	psd1.blur(function () {
		var reg1 = psd.val();
		var reg = psd1.val();
		if (reg1 == reg) {
			// alert("成功")
			em3.css("display", "block");
		} else {
			// alert("成功")
			em3.css("display", "none");
			psd1.css("border", " 1px solid red")
		}
	})

 
	var em4 = $("#em4")
	var iphone = $("#iphone");
	var ireg = /^1([38][0-9]|4[579]|5[0-3,5-9]|6[6]|7[0135678]|9[89])\d{8}$/;
	iphone.blur(function () {
		var sz = iphone.val();
		if (ireg.test(sz)) {
			// alert("成功")
			em4.css("display", "block");
		} else {
			// alert("成功")
			em4.css("display", "none");
			iphone.css("border", " 1px solid red")
		}
	})


	var btn = document.getElementById("btn");
	btn.onclick = function () {
		var uname = email.val();
		var upwd = psd.val();
		// if (uname == "" || upwd == "") {
		// 	alert("请填写漏填选项");
		// 	return;
		// }
		var xhr = new XMLHttpRequest();
		xhr.open("get", "http://localhost/wangyi/php/reg.php?&uname=" + uname + "&upwd=" + upwd);
		xhr.send(null);
		xhr.onreadystatechange = function () {
		if (xhr.readyState == 4 && xhr.status == 200) {
			var res = xhr.responseText;
			if (res == 0) {
				
				alert("用户名重复")
			} else{
				alert("注册成功");
				window.location.href = "http://localhost/wangyi/login.html";
			}
		}
	}
	}
</script>